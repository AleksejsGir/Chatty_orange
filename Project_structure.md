# 📁 Структура проекта Chatty Orange

В этом документе представлена полная структура проекта Chatty Orange - социальной сети на Django. Четкое понимание организации файлов и каталогов поможет быстрее ориентироваться в проекте и соблюдать его архитектуру при разработке.

## 📑 Актуальная структура каталогов и файлов

```
Chatty_orange/                        # Корневой каталог проекта
│
├── Chatty_orange/                    # Основное приложение (core)
│   ├── __init__.py
│   ├── asgi.py                       # ASGI конфигурация
│   ├── settings/                     # Модульная структура настроек
│   │   ├── __init__.py
│   │   ├── base.py                   # Базовые настройки для всех окружений
│   │   ├── development.py            # Настройки для разработки
│   │   └── production.py             # Настройки для продакшена
│   ├── urls.py                       # Главные URL маршруты
│   └── wsgi.py                       # WSGI конфигурация
│
├── users/                            # Приложение для пользователей
│   ├── __init__.py
│   ├── admin.py                      # Настройки админки для пользователей
│   ├── apps.py                       # Конфигурация приложения
│   ├── forms.py                      # Формы для профиля пользователя
│   ├── migrations/                   # Миграции БД для пользователей
│   │   ├── 0001_initial.py           # Начальная миграция
│   │   └── __init__.py
│   ├── models.py                     # Модель пользователя с аватаром, био
│   ├── templates/                    # Шаблоны внутри приложения users
│   │   └── users/                    # Папка с именем приложения
│   │       ├── profile.html          # Профиль пользователя
│   │       └── profile_edit.html     # Редактирование профиля
│   ├── tests.py                      # Тесты для пользователей
│   ├── urls.py                       # URL для пользователей
│   └── views.py                      # Представления для профиля
│
├── posts/                            # Приложение для постов
│   ├── __init__.py
│   ├── admin.py                      # Настройки админки для постов
│   ├── apps.py                       # Конфигурация приложения
│   ├── forms.py                      # Формы для постов
│   ├── migrations/                   # Миграции БД для постов
│   │   └── __init__.py
│   ├── models.py                     # Модели поста, комментария, лайка, тега
│   ├── templates/                    # Шаблоны внутри приложения posts
│   │   └── posts/                    # Папка с именем приложения
│   │       ├── comment.html          # Шаблон для отображения комментария
│   │       ├── comment_confirm_delete.html # Подтверждение удаления комментария
│   │       ├── post_confirm_delete.html   # Подтверждение удаления поста
│   │       ├── post_detail.html      # Детальный просмотр поста
│   │       ├── post_form.html        # Форма создания/редактирования поста
│   │       ├── post_list.html        # Список постов
│   │       ├── privacy_policy.html   # Политика конфиденциальности
│   │       └── terms_of_use.html     # Условия использования
│   ├── tests.py                      # Тесты для постов
│   ├── urls.py                       # URL для постов
│   └── views.py                      # Представления для работы с постами
│
├── subscriptions/                    # Приложение для подписок
│   ├── __init__.py
│   ├── admin.py                      # Настройки админки для подписок
│   ├── apps.py                       # Конфигурация приложения
│   ├── migrations/                   # Миграции БД для подписок
│   │   ├── 0001_initial.py           # Начальная миграция
│   │   └── __init__.py
│   ├── models.py                     # Модель подписки
│   ├── templates/                    # Шаблоны внутри приложения subscriptions
│   │   └── subscriptions/            # Папка с именем приложения
│   │       ├── feed.html             # Лента подписок
│   │       ├── followers.html        # Список подписчиков
│   │       └── following.html        # Список подписок
│   ├── tests.py                      # Тесты для подписок
│   ├── urls.py                       # URL для подписок
│   └── views.py                      # Представления для подписок
│
├── static/                           # Статические файлы
│   ├── css/                          # CSS файлы
│   │   ├── orange-assistant.css      # Стили для помощника
│   │   ├── orange-style.css          # Основные стили проекта
│   │   └── unified-styles.css        # Объединенные стили
│   ├── images/                       # Изображения
│   └── js/                           # JavaScript файлы
│       ├── likes.js                  # Скрипт для функционала лайков
│       ├── orange-assistant.js       # Скрипт для помощника
│       └── subscriptions.js          # Скрипт для функционала подписок
│
├── templates/                        # Глобальные шаблоны проекта
│   ├── account/                      # Шаблоны для django-allauth
│   │   ├── login.html                # Вход в систему
│   │   ├── logout.html               # Выход из системы
│   │   ├── password_reset.html       # Сброс пароля
│   │   ├── password_reset_done.html  # Подтверждение сброса пароля
│   │   ├── password_reset_from_key.html # Форма новго пароля
│   │   ├── password_reset_from_key_done.html # Успешный сброс пароля
│   │   └── signup.html               # Регистрация
│   ├── base.html                     # Базовый шаблон
│   ├── home.html                     # Главная страница
│   ├── includes/                     # Включаемые компоненты
│   │   ├── footer.html               # Футер
│   │   └── navbar.html               # Навигационная панель
│   ├── privacy_policy.html           # Политика конфиденциальности
│   └── terms_of_use.html             # Условия использования
│
├── certbot/                          # Конфигурация для SSL-сертификатов
│   └── www/                          # Директория для подтверждения домена
│
├── nginx/                            # Конфигурация Nginx
│   ├── conf.d/                       # Конфигурационные файлы сайтов
│   └── ssl/                          # SSL-сертификаты
│
├── media/                            # Загружаемые пользователями файлы
│   ├── avatars/                      # Аватары пользователей
│   └── posts/                        # Изображения для постов
│
├── .gitignore                        # Исключения для Git
├── README.md                         # Документация проекта
├── requirements.txt                  # Зависимости проекта
├── manage.py                         # Скрипт управления проектом
├── Dockerfile                        # Конфигурация Docker для разработки
├── Dockerfile.prod                   # Конфигурация Docker для продакшена
├── docker-compose.yml                # Docker Compose для разработки
└── docker-compose.prod.yml           # Docker Compose для продакшена
```

## 🔍 Основные компоненты проекта

### Ядро приложения

- **Chatty_orange/** - Центральный модуль Django-проекта, содержащий основные настройки и конфигурацию.
  - `settings/` - Модульные настройки, разделенные на базовые, разработочные и продакшн
  - `urls.py` - Корневые URL-маршруты, объединяющие URL из всех приложений

### Приложения

- **users/** - Отвечает за аутентификацию и управление пользователями
- **posts/** - Отвечает за создание, отображение и взаимодействие с постами
- **subscriptions/** - Управляет подписками на пользователей и лентой подписок

### Шаблоны

В проекте применяется двухуровневая организация шаблонов:
1. **templates/** - Общие шаблоны для всего проекта:
   - `base.html` - Базовый шаблон с общей структурой HTML
   - `includes/` - Переиспользуемые компоненты (навигация, футер)
   - `account/` - Шаблоны для системы аутентификации django-allauth

2. **app_name/templates/app_name/** - Шаблоны внутри каждого приложения:
   - Следует стандартной Django-практике двойного вложения 
   - Обеспечивает модульность и избегание конфликтов имен

### Статические файлы и медиа

- **static/** - Файлы CSS, JavaScript и изображения, используемые в проекте
  - Включает скрипты для работы с лайками и подписками
- **media/** - Пользовательские загрузки (аватары, изображения в постах)

### Инфраструктура и деплой

- **certbot/** - Настройки для получения и обновления SSL-сертификатов
- **nginx/** - Настройки веб-сервера для продакшн-окружения

### Конфигурация и управление проектом

- **Dockerfile** и **docker-compose.yml** - Контейнеризация для разработки
- **Dockerfile.prod** и **docker-compose.prod.yml** - Контейнеризация для продакшена
- **requirements.txt** - Зависимости Python
- **manage.py** - Утилита командной строки Django

## 📋 Рекомендации по работе со структурой

1. **Модульность**: Сохраняйте логическое разделение кода между приложениями. Если функционал относится к пользователям, размещайте его в приложении `users`.

2. **Настройки**: Используйте модульную структуру настроек:
   - `base.py` - общие настройки для всех окружений
   - `development.py` - настройки для локальной разработки
   - `production.py` - настройки для продакшн-сервера

3. **Шаблоны**: Соблюдайте двойное вложение для шаблонов в приложениях (`app_name/templates/app_name/`).

4. **URL-маршруты**: Определяйте URL в каждом приложении и включайте их в корневой `urls.py`.

5. **Тестирование**: Для каждого приложения можно разделить `tests.py` на папку `tests/` с отдельными модулями для тестирования моделей, представлений и форм.

6. **Контейнеризация**: Используйте соответствующие файлы:
   - Для разработки: `Dockerfile`, `docker-compose.yml`
   - Для продакшн: `Dockerfile.prod`, `docker-compose.prod.yml`

7. **JavaScript-взаимодействие**: 
   - Для функциональности, требующей AJAX (лайки, подписки), используйте отдельные JS файлы
   - Размещайте их в `static/js/` с понятными именами

8. **Миграции**:
   - Регулярно проверяйте и применяйте миграции
   - Никогда не удаляйте файлы миграций из репозитория