<!doctype html>
{% load static %}
<html lang="ru" class="h-100">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Chatty - –°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å Team Orange">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/orange-style.css' %}">
    <link rel="stylesheet" href="{% static 'css/unified-styles.css' %}">
    <link rel="stylesheet" href="{% static 'css/orange-assistant.css' %}">
    <link rel="stylesheet" href="{% static 'css/search-styles.css' %}">
    <link rel="stylesheet" href="{% static 'css/post-images.css' %}">

    <title>{% block title %}Chatty{% endblock %}</title>
</head>

<body class="d-flex flex-column h-100">
    <!-- –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç -->
    <div class="assistant-container" data-username="{% if user.is_authenticated %}{{ user.username }}{% endif %}">
        <img src="{% static 'images/orange.png' %}?v=3"
             class="assistant-image"
             id="orangeAssistant"
             alt="–ü–æ–º–æ—â–Ω–∏–∫">
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
    <header class="sticky-top">
        {% include 'includes/navbar.html' %}
    </header>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ -->
    <main class="flex-shrink-0 py-4">
        <div class="container">
            {% block content %}
            <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            {% endblock %}
        </div>
    </main>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="footer mt-auto">
         {% include 'includes/footer.html' %}
    </footer>

    <!-- –°–∫—Ä–∏–ø—Ç—ã -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="{% static 'js/orange-assistant.js' %}"></script>

    {% block extra_js %}
        <script src="{% static 'js/likes.js' %}"></script>
{#        <script src="{% static 'js/orange-assistant.js' %}"></script>#}
       <script>
        document.addEventListener('DOMContentLoaded', function() {
            const mainImage = document.getElementById('mainImage');
            const thumbnails = document.querySelectorAll('.image-thumbnails .img-thumbnail');
            const currentImageCounter = document.getElementById('currentImage');
            const prevBtn = document.getElementById('prevImage');
            const nextBtn = document.getElementById('nextImage');
            const enlargeBtn = document.getElementById('enlargeImage');

            let currentIndex = 0;
            const images = [
                {% for image in post.images.all %}
                    '{{ image.image.url }}',
                {% endfor %}
            ];

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –º–∏–Ω–∏–∞—Ç—é—Ä
            thumbnails.forEach(thumb => {
                thumb.addEventListener('click', function() {
                    const index = parseInt(this.getAttribute('data-index'));
                    updateMainImage(index);
                });
            });

            // –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            prevBtn.addEventListener('click', prevImage);
            nextBtn.addEventListener('click', nextImage);

            // –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
            enlargeBtn.addEventListener('click', function() {
                window.open(images[currentIndex], '_blank');
            });

            function updateMainImage(index) {
                currentIndex = index;
                mainImage.src = images[index];
                currentImageCounter.textContent = index + 1;

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –º–∏–Ω–∏–∞—Ç—é—Ä—ã
                thumbnails.forEach(thumb => thumb.classList.remove('active'));
                thumbnails[index].classList.add('active');
            }

            function prevImage() {
                const newIndex = (currentIndex - 1 + images.length) % images.length;
                updateMainImage(newIndex);
            }

            function nextImage() {
                const newIndex = (currentIndex + 1) % images.length;
                updateMainImage(newIndex);
            }

            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowLeft') prevImage();
                if (e.key === 'ArrowRight') nextImage();
            });
        });
    </script>
    {% endblock %}
    <div class="modal fade" id="rulesModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">–ü—Ä–∞–≤–∏–ª–∞ —Å–∞–π—Ç–∞</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <!-- –í—Å—Ç–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ terms_of_use.html -->
                    <section class="mb-4">
                        <h4 class="mb-3 text-primary">1. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞</h4>
                        <div class="ms-3">
                            <p class="fw-bold">–ó–∞–ø—Ä–µ—â–µ–Ω–æ:</p>
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <i class="fa-solid fa-ban me-2 text-danger"></i>
                                    –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–µ–Ω–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–π –ª–µ–∫—Å–∏–∫–∏ –≤ –ø–æ—Å—Ç–∞—Ö, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è—Ö –∏ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
                                </li>
                                <li class="mb-2">
                                    <i class="fa-solid fa-ban me-2 text-danger"></i>
                                    –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ –∏–ª–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ —Å —Ç–µ–≥–∞–º–∏ ¬´–ü–æ–ª–∏—Ç–∏–∫–∞¬ª –∏ ¬´–†–µ–ª–∏–≥–∏—è¬ª
                                </li>
                                <li class="mb-2">
                                    <i class="fa-solid fa-ban me-2 text-danger"></i>
                                    –†–∞–∑–º–µ—â–µ–Ω–∏–µ –Ω–µ–∑–∞–∫–æ–Ω–Ω–æ–≥–æ, –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–≥–æ –∏–ª–∏ –≤–≤–æ–¥—è—â–µ–≥–æ –≤ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                                </li>
                            </ul>

                            <p class="fw-bold mt-4">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –≤–ø—Ä–∞–≤–µ:</p>
                            <ul class="list-unstyled">
                                <li class="mb-2">
                                    <i class="fa-solid fa-trash me-2 text-warning"></i>
                                    –£–¥–∞–ª—è—Ç—å –Ω–∞—Ä—É—à–∞—é—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
                                </li>
                                <li>
                                    <i class="fa-solid fa-lock me-2 text-warning"></i>
                                    –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã –∑–∞ —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è
                                </li>
                            </ul>
                        </div>
                    </section>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">–ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="guideModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg"> <!-- –î–æ–±–∞–≤–ª–µ–Ω modal-lg –¥–ª—è –±–æ–ª—å—à–µ–π —à–∏—Ä–∏–Ω—ã -->
            <div class="modal-content">
                <div class="modal-header"> <!-- –î–æ–±–∞–≤–ª–µ–Ω modal-header –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è -->
                    <h5 class="modal-title">–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Å–∞–π—Ç–∞</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body py-3"> <!-- –£–±—Ä–∞–Ω text-center, –Ω–µ–º–Ω–æ–≥–æ —É–º–µ–Ω—å—à–µ–Ω padding -->

                    <h4>–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Chatty Orange:</h4>
                    <ul class="text-start mb-3">
                        <li><strong>üì∏–î–µ–ª–∏—Ç–µ—Å—å –º—ã—Å–ª—è–º–∏ –∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏:</strong> –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø–æ—Å—Ç—ã, –¥–æ–±–∞–≤–ª—è–π—Ç–µ –¥–æ 10 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π.</li>
                        <li><strong>ü§ó–ù–∞—Ö–æ–¥–∏—Ç–µ –¥—Ä—É–∑–µ–π –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–∏—Å–∫, –ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ –∞–≤—Ç–æ—Ä–æ–≤, —Å–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–µ–Ω—Ç–æ–π.</li>
                        <li><strong>üçπ–û–±—â–∞–π—Ç–µ—Å—å:</strong> –°—Ç–∞–≤—å—Ç–µ –ª–∞–π–∫–∏ –∏ –æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –ø–æ—Å—Ç–∞–º.</li>
                        <li><strong>ü§°–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å:</strong> –ú–µ–Ω—è–π—Ç–µ –∞–≤–∞—Ç–∞—Ä –∏ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ.</li>
                        <li><strong>üîù–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–≥–∏:</strong> –§–∏–ª—å—Ç—Ä—É–π—Ç–µ –∫–æ–Ω—Ç–µ–Ω—Ç –∏ –Ω–∞—Ö–æ–¥–∏—Ç–µ –ø–æ—Å—Ç—ã –ø–æ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–º —Ç–µ–º–∞–º.</li>
                    </ul>

                    <h4>–ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã:</h4>
                    <ul class="text-start">
                        <li><strong>–°–æ–±–ª—é–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ —Å–∞–π—Ç–∞:</strong> –û–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –Ω–∏–º–∏ (–º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –≤ –º–µ–Ω—é –ø–æ–º–æ—â–Ω–∏–∫–∞), —á—Ç–æ–±—ã –æ–±—â–µ–Ω–∏–µ –±—ã–ª–æ –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–º –¥–ª—è –≤—Å–µ—Ö.</li>
                        <li><strong>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç—É—Ä:</strong> –ï—Å–ª–∏ –≤—ã –∑–¥–µ—Å—å –≤–ø–µ—Ä–≤—ã–µ, –ø—Ä–æ–π–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç—É—Ä –ø–æ —Å–∞–π—Ç—É (—Ç–∞–∫–∂–µ –≤ –º–µ–Ω—é –ø–æ–º–æ—â–Ω–∏–∫–∞), —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –æ—Å–≤–æ–∏—Ç—å—Å—è.</li>
                        <li><strong>–ê–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π –ü–æ–º–æ—â–Ω–∏–∫:</strong> –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã, –≤—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –ê–ø–µ–ª—å—Å–∏–Ω–æ–≤–æ–º—É –ü–æ–º–æ—â–Ω–∏–∫—É (–∏–∫–æ–Ω–∫–∞ –∞–ø–µ–ª—å—Å–∏–Ω–∞ —Å–ø—Ä–∞–≤–∞). –û–Ω –º–æ–∂–µ—Ç –æ–±—ä—è—Å–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏ —Å–∞–π—Ç–∞, –ø–æ–º–æ—á—å —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –∏–ª–∏ –¥–∞–∂–µ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –∏–¥–µ–∏ –¥–ª—è –ø–æ—Å—Ç–æ–≤!</li>
                    </ul>
                    <p class="text-center mt-3"><em>–ñ–µ–ª–∞–µ–º –ø—Ä–∏—è—Ç–Ω–æ–≥–æ –æ–±—â–µ–Ω–∏—è –Ω–∞ Chatty Orange!</em> üçä</p>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">–ü–æ–Ω—è—Ç–Ω–æ!</button> <!-- –¢–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –∏–∑–º–µ–Ω–µ–Ω –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏ -->
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="aiAssistantModal" tabindex="-1" aria-labelledby="aiAssistantModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="aiAssistantModalLabel">
                        –ê–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π –ü–æ–º–æ—â–Ω–∏–∫
                        <img src="{% static 'images/orange.png' %}" alt="Orange Icon" style="width: 30px; height: auto; margin-left: 10px;">
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="aiChatBody" style="max-height: 400px; overflow-y: auto;">
                    <!-- –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—é–¥–∞ —Å –ø–æ–º–æ—â—å—é JavaScript -->
                    <!-- –ù–∞—á–∞–ª—å–Ω–æ–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–æ JS –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ -->
                </div>
                <div class="modal-footer">
                    <div class="d-flex w-100 mb-2">
                        <button id="aiFaqBtn" class="btn btn-sm btn-outline-secondary me-2" title="–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –æ —Å–∞–π—Ç–µ –∏–ª–∏ –µ–≥–æ –ø—Ä–∞–≤–∏–ª–∞—Ö">–í–æ–ø—Ä–æ—Å –ø–æ —Å–∞–π—Ç—É</button>
                        <button id="aiFeatureBtn" class="btn btn-sm btn-outline-info" title="–£–∑–Ω–∞—Ç—å, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è">–û–±—ä—è—Å–Ω–∏ —Ñ—É–Ω–∫—Ü–∏—é</button>
                    </div>
                    <textarea id="aiChatMessageInput" class="form-control" placeholder="–°–ø—Ä–æ—Å–∏ –º–µ–Ω—è —á—Ç–æ-–Ω–∏–±—É–¥—å..." rows="2"></textarea>
                    <button id="aiSendMessageBtn" class="btn btn-primary mt-2 w-100">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Interactive Tour Modal -->
    <div class="modal fade" id="interactiveTourModal" tabindex="-1" aria-labelledby="interactiveTourModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="interactiveTourModalLabel">–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç—É—Ä (–®–∞–≥ <span id="tourStepNumber">1</span>)</h5>
                    <button type="button" class="btn-close" id="closeTourModalBtn" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="tourModalBody">
                    <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —à–∞–≥–∞ —Ç—É—Ä–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ —Å—é–¥–∞ -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="endTourBtn" data-bs-dismiss="modal">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç—É—Ä</button>
                    <button type="button" class="btn btn-primary" id="nextTourStepBtn">–î–∞–ª–µ–µ</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>